<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="google-site-verification" content="kpbWRIhynKBS8mLaEpmMxE8cHsKNrjQmoMV7gS0lCps"/><base href="/artaza/"/><title>Compile C++ to wasm using CMake</title><meta name="next-head-count" content="5"/><link rel="icon" href="./graphics/artaza-logo.svg"/><link rel="preload" href="/artaza/_next/static/css/b959b1cea7de76cd.css" as="style"/><link rel="stylesheet" href="/artaza/_next/static/css/b959b1cea7de76cd.css" data-n-g=""/><link rel="preload" href="/artaza/_next/static/css/35346f85678c8800.css" as="style"/><link rel="stylesheet" href="/artaza/_next/static/css/35346f85678c8800.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/artaza/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/artaza/_next/static/chunks/webpack-43706e096b7ddd85.js" defer=""></script><script src="/artaza/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/artaza/_next/static/chunks/main-97dc0a10f0946b99.js" defer=""></script><script src="/artaza/_next/static/chunks/pages/_app-f0ed842210e0a729.js" defer=""></script><script src="/artaza/_next/static/chunks/664-1b4479b4462ded63.js" defer=""></script><script src="/artaza/_next/static/chunks/691-bb411d4d0f430f76.js" defer=""></script><script src="/artaza/_next/static/chunks/pages/blog/%5Bslug%5D-75ef8d6d5f0f245f.js" defer=""></script><script src="/artaza/_next/static/M75_L6eQ7DTzugThG8HWw/_buildManifest.js" defer=""></script><script src="/artaza/_next/static/M75_L6eQ7DTzugThG8HWw/_ssgManifest.js" defer=""></script></head><body class="red-theme"><div id="__next"><a href="/artaza/blog"><button class="blog_back_button__ZXg2c">âžœ</button></a><main class="__className_198ee5"><div class="blog_blog_page_wrapper__FyeSS"><div class="blog_blog_page__Dpz4Y"><div class="blog_post_info__RFq7N"><img src="./graphics/blog-cover/cmake_wasm.png" alt="blog page cover" class="blog_cover_image__ijGpS"/><h1 class="blog_title__dLTYQ">Compile C++ to wasm using CMake</h1><div class="blog_date__YKU3Y">October 10, 2022</div><div class="blog_tags__1olfU"><span> <!-- -->web<!-- --> </span><span> <!-- -->c++<!-- --> </span><span> <!-- -->wasm<!-- --> </span></div></div><article class="blog_post_content__VVCpL"><h1 id="introduction">Introduction</h1>
<p>In this article, we will talk about, how to setup a <strong>CMake</strong> to compile a C++ project to <strong>WebAssembly (.wasm).</strong></p>
<h2 id="installation-prerequisite">Installation Prerequisite</h2>
<ul>
<li>Emscripten <a href="https://emscripten.org/docs/getting_started/downloads.html">(Click here)</a></li>
<li>CMake <a href="https://cmake.org/download/">(Click here)</a></li>
</ul>
<h2 id="file-structure">File Structure</h2>
<ul>
<li>ðŸ“‚build</li>
<li>ðŸ“‚cpp</li>
<li>ðŸ“‚generated</li>
</ul>
<h2 id="creating-c-file">Creating C++ file</h2>
<pre><code class="language-cpp">// cpp/main.cpp

extern &quot;C&quot; {
    char* greet(){
        return &quot;Hello &quot;;
    }
}
</code></pre>
<h2 id="creating-the-cmakeliststxt-file">Creating the <code>CMakeLists.txt</code> file</h2>
<pre><code class="language-cmake">project(Wasm) # PROJECT NAME
cmake_minimum_required(VERSION 3.16.3)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY &quot;${CMAKE_SOURCE_DIR}/../generated&quot;)
set(EXPORTED_FUNCTIONS &quot;&#39;[_greet]&#39;&quot;) # Putting the greet function we want to export
set(CMAKE_EXECUTABLE_SUFFIX &quot;.js&quot;)
set(CMAKE_BUILD_RPATH &quot;/build&quot;)
set(CMAKE_CXX_STANDARD 17)

include_directories(include)
file(GLOB SOURCES src/*.cpp)
add_executable(compiled ${SOURCES})

set_target_properties(compiled PROPERTIES LINK_FLAGS &quot;-O3 -s WASM=0 -s EXPORTED_FUNCTIONS=${EXPORTED_FUNCTIONS}&quot;)
</code></pre>
</article></div></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"Compile C++ to wasm using CMake","date":"October 10, 2022","description":"As you know useEffect is used in React Components for running code on state changes on states and componenet reloads. But, useEffect() functionis asynchronous which poses problems in some particular situations. But, useLayoutEffect() works like class components life cycle methods which has advantages","tags":["web","c++","wasm"],"cover_image":"./graphics/blog-cover/cmake_wasm.png"},"content":"\n# Introduction\n\nIn this article, we will talk about, how to setup a **CMake** to compile a C++ project to **WebAssembly (.wasm).**\n\n## Installation Prerequisite\n\n- Emscripten [(Click here)](https://emscripten.org/docs/getting_started/downloads.html)\n- CMake [(Click here)](https://cmake.org/download/)\n\n## File Structure\n\n- ðŸ“‚build\n- ðŸ“‚cpp\n- ðŸ“‚generated\n\n## Creating C++ file\n\n```cpp\n// cpp/main.cpp\n\nextern \"C\" {\n\tchar* greet(){\n\t\treturn \"Hello \";\n\t}\n}\n\n```\n\n## Creating the `CMakeLists.txt` file\n\n```cmake\nproject(Wasm) # PROJECT NAME\ncmake_minimum_required(VERSION 3.16.3)\n\nset(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"${CMAKE_SOURCE_DIR}/../generated\")\nset(EXPORTED_FUNCTIONS \"'[_greet]'\") # Putting the greet function we want to export\nset(CMAKE_EXECUTABLE_SUFFIX \".js\")\nset(CMAKE_BUILD_RPATH \"/build\")\nset(CMAKE_CXX_STANDARD 17)\n\ninclude_directories(include)\nfile(GLOB SOURCES src/*.cpp)\nadd_executable(compiled ${SOURCES})\n\nset_target_properties(compiled PROPERTIES LINK_FLAGS \"-O3 -s WASM=0 -s EXPORTED_FUNCTIONS=${EXPORTED_FUNCTIONS}\")\n```\n","slug":"-cpp-to-wasm-using-cmake"},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"-cpp-to-wasm-using-cmake"},"buildId":"M75_L6eQ7DTzugThG8HWw","assetPrefix":"/artaza","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>